<ul *ngIf="(patientData.comments | async) && (teamData.userData | async)">
	<li *ngFor="let comment of patientData.comments | async">
		<span class="comment">{{ comment.comment }}</span>
		<div class="timestamp">
			<span [title]="comment.by">{{ (teamData.userData | async)[comment.by]?.name || comment.by }}</span>
			<span>at {{ comment.at | date:'HH:mm, d/MM/yy' }}</span>
		</div>
	</li>
	<li>
		<app-new-item-form (addItemRequest)="teamData.addComment($event, patientData.nhi)" placeholder="Add comment"></app-new-item-form>
		<span>
			<label for="limitTo">Number of comments:</label>
			<button *ngFor="let limit of teamData.limits"
				[disabled]="limit === (teamData.limitToLast | async)"
				(click)="teamData.limitToLast.next(limit)">
				{{ limit }}
			</button>
		</span>
	</li>
</ul>
<app-loading *ngIf="!(patientData.comments | async) || !(teamData.userData | async)"></app-loading>
